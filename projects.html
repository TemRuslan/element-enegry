<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Реализованные проекты: энергоцентры, поставка, ПНР и сервис.">
    <title>Проекты | Элемент Энергия</title>

    <script>
        // Tailwind CDN config: adds custom "accent" utilities used across the site (bg-accent/..., text-accent, etc.)
        window.tailwind = window.tailwind || {};
        window.tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        accent: '#0ea5e9',
                        'accent-dark': '#0284c7',
                    }
                }
            }
        };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@700&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body class="projects-page">
    <!-- HEADER PLACEHOLDER -->
    <div id="header-placeholder"></div>

    <!-- LIGHT PAGE -->
    <div class="page-light">
        <div class="bg-blob blob-1"></div>
        <div class="bg-blob blob-2"></div>

        <!-- HERO (light, full-screen) -->
        <section class="pt-14 pb-8 min-h-[calc(100vh-88px)] flex items-center">
            <div class="max-w-7xl mx-auto px-6 w-full">
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 items-center">
                    <div class="lg:col-span-6">
                        <h1 class="text-5xl md:text-7xl font-black mb-6 leading-[1.02] uppercase tracking-tighter">
                            Проекты
                        </h1>

                        <p class="text-lg md:text-xl text-slate-600 leading-relaxed max-w-2xl">
                            Проектируем и строим энергоцентры, выполняем поставку, ПНР и сервис. Ниже собраны
                            реализованные проекты.
                        </p>

                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mt-10">
                            <div class="glass-card metric-card p-6">
                                <div class="text-3xl font-black tracking-tight text-slate-900">120+</div>
                                <div class="mt-2 text-[11px] font-black uppercase tracking-[0.18em] text-slate-500">
                                    Реализованных проектов
                                </div>
                            </div>
                            <div class="glass-card metric-card p-6">
                                <div class="text-3xl font-black tracking-tight text-slate-900">8 лет</div>
                                <div class="mt-2 text-[11px] font-black uppercase tracking-[0.18em] text-slate-500">
                                    Безупречного сервиса
                                </div>
                            </div>
                            <div class="glass-card metric-card p-6">
                                <div class="text-3xl font-black tracking-tight text-slate-900">70 МВт</div>
                                <div class="mt-2 text-[11px] font-black uppercase tracking-[0.18em] text-slate-500">
                                    Общая мощность объектов
                                </div>
                            </div>
                        </div>

                        <div class="mt-10">
                            <div class="text-[11px] font-black uppercase tracking-[0.22em] text-slate-500">
                                Преимущества
                            </div>
                            <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div class="flex items-start gap-3">
                                    <div
	                                        class="projects-adv-icon shrink-0 w-10 h-10 rounded-lg bg-accent/10 border border-accent/20 flex items-center justify-center text-accent">
                                        <i class="fa-solid fa-helmet-safety"></i>
                                    </div>
                                    <div>
                                        <div class="font-black uppercase tracking-tight text-slate-900">
                                            Под ключ
                                        </div>
                                        <div class="text-sm text-slate-600 leading-relaxed">
                                            Комплексно: поставка, ПНР и сопровождение проекта.
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div
	                                        class="projects-adv-icon shrink-0 w-10 h-10 rounded-lg bg-accent/10 border border-accent/20 flex items-center justify-center text-accent">
                                        <i class="fa-solid fa-gauge-high"></i>
                                    </div>
                                    <div>
                                        <div class="font-black uppercase tracking-tight text-slate-900">
                                            Нагрузки 24/7
                                        </div>
                                        <div class="text-sm text-slate-600 leading-relaxed">
                                            Решения под непрерывный режим и требования к надежности.
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div
	                                        class="projects-adv-icon shrink-0 w-10 h-10 rounded-lg bg-accent/10 border border-accent/20 flex items-center justify-center text-accent">
                                        <i class="fa-solid fa-diagram-project"></i>
                                    </div>
                                    <div>
                                        <div class="font-black uppercase tracking-tight text-slate-900">
                                            Масштабирование
                                        </div>
                                        <div class="text-sm text-slate-600 leading-relaxed">
                                            Проекты от компактных до крупных объектов по мощности.
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div
	                                        class="projects-adv-icon shrink-0 w-10 h-10 rounded-lg bg-accent/10 border border-accent/20 flex items-center justify-center text-accent">
                                        <i class="fa-solid fa-screwdriver-wrench"></i>
                                    </div>
                                    <div>
                                        <div class="font-black uppercase tracking-tight text-slate-900">
                                            Сервис
                                        </div>
                                        <div class="text-sm text-slate-600 leading-relaxed">
                                            Регламенты, обслуживание и поддержка эксплуатации.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

	                    <div class="lg:col-span-6">
	                        <div
		                            class="projects-media relative overflow-hidden border border-slate-900/10 bg-white/40 backdrop-blur-md shadow-[0_28px_80px_rgba(15,23,42,0.10)]">
	                            <div class="aspect-square w-full">
	                                <img src="assets/site-photos/projects/projects-hero.png" alt="Энергоцентр"
	                                    class="absolute inset-0 w-full h-full object-cover">
	                            </div>
	                        </div>
                    </div>
                </div>
            </div>
        </section>

        <main class="max-w-7xl mx-auto px-6 pb-24">
            <!-- STATUS / SERVICE -->
            <section id="status" class="pt-10 pb-10">
                <div class="max-w-4xl mb-10">
                    <h2 class="text-3xl md:text-5xl font-black uppercase tracking-tight mb-3 whitespace-nowrap">
                        Проекты в реализации
                    </h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="glass-card p-10">
                        <div class="text-[11px] font-black uppercase tracking-[0.22em] text-slate-500">
                            Проекты в процессе реализации
                        </div>
                        <div class="mt-3 text-2xl md:text-3xl font-black uppercase tracking-tight text-slate-900">
                            Еще 40 проектов
                        </div>
                        <div class="mt-3 text-slate-600 leading-relaxed">
                            Работы в текущих проектах включают строительство и монтаж энергоцентров, поставку и
                            интеграцию ГПУ, пусконаладочные работы (ПНР), настройку автоматики и параллельной работы с
                            сетью, а также ввод в эксплуатацию и сервисные регламенты под режим 24/7.
                        </div>
                    </div>

                    <div class="glass-card p-10">
                        <div class="text-[11px] font-black uppercase tracking-[0.22em] text-slate-500">
                            Сервисное подразделение
                        </div>
                        <div class="mt-3 text-2xl md:text-3xl font-black uppercase tracking-tight text-slate-900">
                            10 крупных объектов на сервисе
                        </div>
                        <div class="mt-3 text-slate-600 leading-relaxed">
                            Сервис для крупных объектов: плановое ТО, мониторинг, аварийные выезды, диагностика,
                            настройка контроллеров, восстановление режимов параллельной работы, сопровождение по
                            регламентам и обеспечение запасными частями для стабильной эксплуатации.
                        </div>
                    </div>
                </div>
            </section>

            <!-- PROJECTS (custom + PDF list) -->
            <section id="projects" class="pb-10">
                <div class="max-w-4xl mb-10">
                    <h2 class="text-3xl md:text-5xl font-black uppercase tracking-tight mb-3">
                        Реализованные проекты
                    </h2>
                </div>

                <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 gap-8"></div>

            </section>
        </main>

        <!-- FOOTER PLACEHOLDER -->
        <div id="footer-placeholder"></div>
    </div>

    <script>
        // Render projects list from JSON (anonymized) and link to per-project pages.
        document.addEventListener('DOMContentLoaded', async function () {
            const grid = document.getElementById('projects-grid');
            if (!grid) return;

            const safeText = (v) => (v == null ? '' : String(v));

            const renderCard = (item) => {
                const href = safeText(item.slug) ? `${safeText(item.slug)}.html` : 'projects.html';

                const card = document.createElement('a');
                card.href = href;
                card.className = 'glass-card p-10 flex flex-col no-underline';
                card.setAttribute('aria-label', safeText(item.title || 'Проект'));

                if (item.image) {
                    const media = document.createElement('div');
                    media.className = 'projects-card-media relative overflow-hidden bg-white/40';

                    const img = document.createElement('img');
                    img.src = item.image;
                    img.alt = safeText(item.title || 'Проект');
                    img.loading = 'lazy';
                    img.className = 'w-full h-auto aspect-[16/10] object-cover';

                    media.appendChild(img);
                    card.appendChild(media);
                }

                const metaRow = document.createElement('div');
                metaRow.className = 'flex flex-wrap items-center gap-2';

                if (item.year) {
                    const year = document.createElement('div');
                    year.className = 'text-[11px] font-black uppercase tracking-[0.22em] text-slate-500';
                    year.textContent = safeText(item.year);
                    metaRow.appendChild(year);
                }

                const nda = document.createElement('div');
                nda.className = 'text-[11px] font-black uppercase tracking-[0.18em] text-slate-500';
                nda.textContent = safeText(item.ndaLabel || '');
                if (nda.textContent) metaRow.appendChild(nda);

                if (metaRow.childElementCount) card.appendChild(metaRow);

                const title = document.createElement('div');
                title.className = (metaRow.childElementCount ? 'mt-3 ' : '') + 'text-lg font-black uppercase tracking-tight text-slate-900 break-anywhere';
                title.textContent = safeText(item.title || 'Проект');
                card.appendChild(title);

                const region = document.createElement('div');
                region.className = 'mt-2 text-sm text-slate-600 leading-relaxed break-anywhere';
                region.textContent = safeText(item.region || '');
                if (region.textContent) card.appendChild(region);

                const details = document.createElement('div');
                details.className = 'mt-6 pt-6 border-t border-slate-900/10';

                const paramsLabel = document.createElement('div');
                paramsLabel.className = 'text-[11px] font-black uppercase tracking-[0.22em] text-slate-500';
                paramsLabel.textContent = 'Параметры';
                details.appendChild(paramsLabel);

                const params = document.createElement('div');
                params.className = 'mt-3 text-sm text-slate-600 leading-relaxed space-y-1';
                const power = safeText(item.power);
                const units = safeText(item.units);
                const mode = safeText(item.mode);
                const industry = safeText(item.industry);

                if (power) {
                    const line = document.createElement('div');
                    line.innerHTML = `<span class="text-slate-500">Мощность:</span> ${power}`;
                    params.appendChild(line);
                }
                if (units) {
                    const line = document.createElement('div');
                    line.innerHTML = `<span class="text-slate-500">Агрегаты:</span> ${units}`;
                    params.appendChild(line);
                }
                if (mode) {
                    const line = document.createElement('div');
                    line.innerHTML = `<span class="text-slate-500">Режим:</span> ${mode}`;
                    params.appendChild(line);
                }
                if (industry) {
                    const line = document.createElement('div');
                    line.innerHTML = `<span class="text-slate-500">Отрасль:</span> ${industry}`;
                    params.appendChild(line);
                }
                details.appendChild(params);

                const scope = Array.isArray(item.scope) ? item.scope.filter(Boolean) : [];
                if (scope.length) {
                    const scopeLabel = document.createElement('div');
                    scopeLabel.className = 'mt-6 text-[11px] font-black uppercase tracking-[0.22em] text-slate-500';
                    scopeLabel.textContent = 'Состав работ';
                    details.appendChild(scopeLabel);

                    const scopeText = document.createElement('div');
                    scopeText.className = 'mt-3 text-sm text-slate-600 leading-relaxed break-anywhere';
                    scopeText.textContent = scope.join(' · ');
                    details.appendChild(scopeText);
                }

                card.appendChild(details);
                return card;
            };

            try {
                const res = await fetch('data/projects.json', { cache: 'no-store' });
                if (!res.ok) throw new Error('Failed to load projects.json');
                const json = await res.json();
                const items = Array.isArray(json) ? json : (Array.isArray(json.items) ? json.items : []);

                const realized = items.filter((i) => (i && (i.status || 'realized') === 'realized'));
                realized.sort((a, b) => {
                    const ap = Number(a.priority || 0);
                    const bp = Number(b.priority || 0);
                    if (bp !== ap) return bp - ap;
                    const ai = !!a.image;
                    const bi = !!b.image;
                    if (ai !== bi) return ai ? -1 : 1;
                    const ay = Number(a.year || 0);
                    const by = Number(b.year || 0);
                    return by - ay;
                });

                for (const item of realized) grid.appendChild(renderCard(item));
            } catch (e) {
                grid.innerHTML = `
                    <div class="glass-card p-10 md:col-span-2">
                        <div class="text-[11px] font-black uppercase tracking-[0.22em] text-slate-500">Ошибка</div>
                        <div class="mt-3 text-slate-600 leading-relaxed">
                            Не удалось загрузить список проектов. Если вы открываете страницу локально (file://),
                            запустите любой локальный сервер или откройте сайт по домену.
                        </div>
                    </div>
                `;
            }
        });
    </script>

    <script src="js/script.js"></script>
</body>

</html>
