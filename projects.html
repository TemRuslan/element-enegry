<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Реализованные проекты: энергоцентры, поставка, ПНР и сервис.">
    <title>Проекты | Элемент Энергия</title>

    <script>
        // Tailwind CDN config: adds custom "accent" utilities used across the site (bg-accent/..., text-accent, etc.)
        window.tailwind = window.tailwind || {};
        window.tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        accent: '#0ea5e9',
                        'accent-dark': '#0284c7',
                    }
                }
            }
        };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@700&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body class="projects-page">
    <!-- HEADER PLACEHOLDER -->
    <div id="header-placeholder"></div>

    <!-- LIGHT PAGE -->
    <div class="page-light">
        <div class="bg-blob blob-1"></div>
        <div class="bg-blob blob-2"></div>

        <!-- HERO (light, full-screen) -->
        <section class="pt-24 lg:pt-20 pb-40">
            <div class="max-w-7xl mx-auto px-6 w-full">
                <div class="max-w-4xl">
                        <ol class="flex flex-wrap items-center gap-2 text-[14px] font-medium tracking-[0.06em] text-slate-500 mb-6 lg:mb-[50px] lg:mt-2"
                            aria-label="breadcrumbs">
                            <li><a href="index.html" class="hover:text-accent transition">Главная</a></li>
                            <li aria-hidden="true" class="text-slate-400">/</li>
                            <li>Работаем по всей России</li>
                        </ol>

                        <h1 class="projects-title text-3xl md:text-5xl mb-6 leading-[1.02]">
                            Работаем по всей России
                        </h1>

                        <div
                            class="projects-media relative overflow-hidden border border-slate-900/10 bg-white/40 backdrop-blur-md shadow-[0_28px_80px_rgba(15,23,42,0.10)] mb-8">
                            <div class="aspect-[16/10] w-full relative">
                                <img src="assets/site-photos/projects/projects-hero.png" alt="Энергоцентр"
                                    class="absolute inset-0 w-full h-full object-cover">
                            </div>
                        </div>

                        <p class="text-lg md:text-xl text-slate-600 leading-relaxed max-w-2xl">
                            Проектируем и строим энергоцентры, выполняем поставку, ПНР и сервис. Ниже собраны
                            реализованные проекты.
                        </p>

                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mt-10">
                            <div class="glass-card metric-card p-6">
                                <div class="text-3xl font-black tracking-tight text-slate-900">120+</div>
                                <div class="mt-2 text-[11px] font-black uppercase tracking-[0.18em] text-slate-500">
                                    Реализованных проектов
                                </div>
                            </div>
                            <div class="glass-card metric-card p-6">
                                <div class="text-3xl font-black tracking-tight text-slate-900">8 лет</div>
                                <div class="mt-2 text-[11px] font-black uppercase tracking-[0.18em] text-slate-500">
                                    Безупречного сервиса
                                </div>
                            </div>
                            <div class="glass-card metric-card p-6">
                                <div class="text-3xl font-black tracking-tight text-slate-900">70 МВт</div>
                                <div class="mt-2 text-[11px] font-black uppercase tracking-[0.18em] text-slate-500">
                                    Общая мощность объектов
                                </div>
                            </div>
                        </div>

                        <!-- "Преимущества" removed per request -->
                </div>
            </div>
        </section>

        <main class="max-w-7xl mx-auto px-6 pt-0 pb-24">
            <div class="space-y-40">
            <!-- STATUS / SERVICE -->
            <section id="status">
                <div class="max-w-4xl mb-10">
                    <h2 class="projects-title text-3xl md:text-5xl mb-3 whitespace-nowrap">
                        Проекты в реализации
                    </h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="glass-card p-10">
                        <div class="text-[11px] font-black uppercase tracking-[0.22em] text-slate-500">
                            Проекты в процессе реализации
                        </div>
                        <div class="mt-3 text-2xl md:text-3xl font-black uppercase tracking-tight text-slate-900">
                            Еще 40 проектов
                        </div>
                        <div class="mt-3 text-slate-600 leading-relaxed">
                            Работы в текущих проектах включают строительство и монтаж энергоцентров, поставку и
                            интеграцию ГПУ, пусконаладочные работы (ПНР), настройку автоматики и параллельной работы с
                            сетью, а также ввод в эксплуатацию и сервисные регламенты под режим 24/7.
                        </div>
                    </div>

                    <div class="glass-card p-10">
                        <div class="text-[11px] font-black uppercase tracking-[0.22em] text-slate-500">
                            Сервисное подразделение
                        </div>
                        <div class="mt-3 text-2xl md:text-3xl font-black uppercase tracking-tight text-slate-900">
                            10 крупных объектов на сервисе
                        </div>
                        <div class="mt-3 text-slate-600 leading-relaxed">
                            Сервис для крупных объектов: плановое ТО, мониторинг, аварийные выезды, диагностика,
                            настройка контроллеров, восстановление режимов параллельной работы, сопровождение по
                            регламентам и обеспечение запасными частями для стабильной эксплуатации.
                        </div>
                    </div>
                </div>
            </section>

            <!-- PROJECTS (custom + PDF list) -->
            <section id="projects">
                <div class="max-w-4xl mb-10">
                    <h2 class="projects-title text-3xl md:text-5xl mb-3">
                        Реализованные проекты
                    </h2>
                </div>

                <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-3 gap-8"></div>

            </section>
            </div>
        </main>

        <!-- FOOTER PLACEHOLDER -->
        <div id="footer-placeholder"></div>
    </div>

    <script>
        // Render projects list from JSON (anonymized) and link to per-project pages.
        document.addEventListener('DOMContentLoaded', async function () {
            const grid = document.getElementById('projects-grid');
            if (!grid) return;

            const safeText = (v) => (v == null ? '' : String(v));

            const renderCard = (item) => {
                const href = safeText(item.slug) ? `${safeText(item.slug)}.html` : 'projects.html';

                const card = document.createElement('a');
                card.href = href;
                card.className = 'glass-card p-10 flex flex-col no-underline';
                card.setAttribute('aria-label', safeText(item.title || 'Проект'));

                // Keep the same layout baseline across cards:
                // if no image is available, reserve the same space as the media block.
                if (item.image) {
                    const media = document.createElement('div');
                    media.className = 'projects-card-media relative overflow-hidden bg-white/40';

                    const img = document.createElement('img');
                    img.src = item.image;
                    img.alt = safeText(item.title || 'Проект');
                    img.loading = 'lazy';
                    img.className = 'w-full h-auto aspect-[16/10] object-cover';

                    media.appendChild(img);
                    card.appendChild(media);
                } else {
                    const media = document.createElement('div');
                    media.className = 'projects-card-media relative overflow-hidden bg-white/40';

                    const placeholder = document.createElement('div');
                    placeholder.className = 'w-full aspect-[16/10] bg-slate-900/5';
                    placeholder.setAttribute('aria-hidden', 'true');
                    media.appendChild(placeholder);

                    card.appendChild(media);
                }

                // Year (left) + region (right), aligned on one line.
                if (item.year || item.region) {
                    const metaRow = document.createElement('div');
                    metaRow.className = 'flex items-baseline justify-between gap-4';

                    const year = document.createElement('div');
                    year.className = 'text-[11px] font-black uppercase tracking-[0.22em] text-slate-500';
                    year.textContent = item.year ? safeText(item.year) : '';
                    metaRow.appendChild(year);

                    const region = document.createElement('div');
                    region.className = 'text-[11px] font-black uppercase tracking-[0.22em] text-slate-500 text-right break-anywhere';
                    region.textContent = item.region ? safeText(item.region) : '';
                    metaRow.appendChild(region);

                    card.appendChild(metaRow);
                }

                const customerText = safeText(item.customer || '');
                if (customerText) {
                    const customer = document.createElement('div');
                    customer.className = ((item.year || item.region) ? 'mt-3 ' : '') + 'text-lg font-black uppercase tracking-tight text-slate-900 break-anywhere';
                    customer.textContent = customerText;
                    card.appendChild(customer);
                }

                const title = document.createElement('div');
                title.className =
                    (((item.year || item.region) || customerText) ? 'mt-2 ' : '') +
                    (customerText ? 'text-sm font-black uppercase tracking-tight text-slate-700 ' : 'text-lg font-black uppercase tracking-tight text-slate-900 ') +
                    'break-anywhere';
                title.textContent = safeText(item.title || 'Проект');
                card.appendChild(title);

                const description = document.createElement('div');
                description.className = 'mt-4 text-sm text-slate-600 leading-relaxed break-anywhere';
                description.textContent = safeText(item.description || '');
                if (description.textContent) card.appendChild(description);

                const sum = safeText(item.contractSum || '');
                if (sum) {
                    const sumRow = document.createElement('div');
                    sumRow.className = 'mt-6 flex items-baseline justify-between gap-4';

                    const sumLabel = document.createElement('div');
                    sumLabel.className = 'text-[11px] font-black uppercase tracking-[0.22em] text-slate-500';
                    sumLabel.textContent = 'Сумма';

                    const sumValue = document.createElement('div');
                    sumValue.className = 'text-sm font-black text-slate-900';
                    sumValue.textContent = sum;

                    sumRow.appendChild(sumLabel);
                    sumRow.appendChild(sumValue);
                    card.appendChild(sumRow);
                }

                // "Параметры" на карточке списка проектов не показываем (как вы попросили).

                const more = document.createElement('div');
                more.className = 'mt-8 inline-flex items-center gap-2 text-[11px] font-black uppercase tracking-[0.22em] text-accent';
                more.innerHTML = `Подробнее <i class="fa-solid fa-arrow-right"></i>`;
                card.appendChild(more);
                return card;
            };

            try {
                const res = await fetch('data/projects.json', { cache: 'no-store' });
                if (!res.ok) throw new Error('Failed to load projects.json');
                const json = await res.json();
                const items = Array.isArray(json) ? json : (Array.isArray(json.items) ? json.items : []);

                const realized = items.filter((i) => (i && (i.status || 'realized') === 'realized'));
                realized.sort((a, b) => {
                    const ai = !!a.image;
                    const bi = !!b.image;
                    if (ai !== bi) return ai ? -1 : 1;
                    const ap = Number(a.priority || 0);
                    const bp = Number(b.priority || 0);
                    if (bp !== ap) return bp - ap;
                    const ay = Number(a.year || 0);
                    const by = Number(b.year || 0);
                    return by - ay;
                });

                for (const item of realized) grid.appendChild(renderCard(item));
            } catch (e) {
                grid.innerHTML = `
                    <div class="glass-card p-10 md:col-span-2">
                        <div class="text-[11px] font-black uppercase tracking-[0.22em] text-slate-500">Ошибка</div>
                        <div class="mt-3 text-slate-600 leading-relaxed">
                            Не удалось загрузить список проектов. Если вы открываете страницу локально (file://),
                            запустите любой локальный сервер или откройте сайт по домену.
                        </div>
                    </div>
                `;
            }
        });
    </script>

    <script src="js/script.js"></script>
</body>

</html>
